AprilCommonRel <- relcoverApril[(relcoverApril[100,] > 5) | (relcoverApril[101,] > .05), ]
my.data.frame <- relcoverApril[(relcoverApril[100,] < 5)) & (relcoverApril[101,] < .05), ]
my.data.frame <- relcoverApril[(relcoverApril[100,] < 5) & (relcoverApril[101,] < .05), ]
View(my.data.frame)
View(AprilCommonRel)
sum <- subset(lpiApril, select=c(relcoverApril[c(100:101),]))
sum <- (relcoverApril[c(100:101),])
View(sum)
View(sum)
AprilCommonRel <- relcoverApril[(sum[1,] > 5) | (sum[2,] > .05), ]
library(plyr)
library(dplyr)
# LPI file too big for DIMA, broke it up into soil types to download
# Use the line totals tab from .xlsx file
begay<-read.csv('F:/LPI/Reports/LPIindicatorsBEGAY.csv')
ignacio<-read.csv('F:/LPI/Reports/LPIindicatorsIGNACIOLEANTO.csv')
mido<-read.csv('F:/LPI/Reports/LPIindicatorsMIDO.csv')
#Combined back into one LPI file
lpi3<-rbind(begay, ignacio, mido)
write.csv(lpi3,file="F:/LPI/Output/AprilLPIofAll3Soils.csv")
lpi3$Any.Hit.N[is.na(lpi3$Any.Hit.N)] <- lpi3$X1st.Hit.N[is.na(lpi3$Any.Hit.N)]; lpi3
#Put into plot by species matrix
lpiApril<-xtabs(Any.Hit.N~Plot+Indicator, lpi3)
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
lpiApril<-read.csv('F:/LPI/Output/AprilLPIplotXspp.csv',row.names=1)
# Combine DP and live of spp,
a <-select(lpiApril,contains(".DP"))
ls(a)
lpiApril$ARTR2=lpiApril$ARTR2+lpiApril$ARTR2.DP
lpiApril$ATCA2=lpiApril$ATCA2+lpiApril$ATCA2.DP
lpiApril$CHVI8=lpiApril$CHVI8+lpiApril$CHVI8.DP
lpiApril$HECO26=lpiApril$HECO26+lpiApril$HECO26.DP
lpiApril$KRLA2=lpiApril$KRLA2+lpiApril$KRLA2.DP
lpiApril$MAFR3=lpiApril$MAFR3+lpiApril$MAFR3.DP
lpiApril$OPPO=lpiApril$OPPO+lpiApril$OPPO.DP
lpiApril$SHRO=lpiApril$SHRO+lpiApril$SHRO.DP
lpiApril <- subset(lpiApril, select=-c(ARTR2.DP,ATCA2.DP,CHVI8.DP,HECO26.DP,KRLA2.DP,MAFR3.DP,OPPO.DP,SHRO.DP))
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
# Calculate density per m2
den<-lpiApril
den <- den/150 # (5 plots)*(30 meters)=150
den <- subset(den, select=-c(Bare.Soil,Total.Foliar,Total.Litter))
#add all hits on a plot basis, then divide each cell by the sum of a row
# to get how many times a spp was hit relative to how many in plot.
lpiApril <- subset(lpiApril, select=-c(Bare.Soil,Total.Foliar,Total.Litter))
relcoverApril<-lpiApril/rowSums(lpiApril)
write.csv(relcoverApril,file="F:/LPI/Output/AprilLPIRelativeCover.csv")
relcoverApril[100,] <- colSums(relcoverApril != 0)
relcoverApril[101,] <- colSums(relcoverApril[c(1:99),])
library(plyr)
library(dplyr)
# LPI file too big for DIMA, broke it up into soil types to download
# Use the line totals tab from .xlsx file
begay<-read.csv('F:/LPI/Reports/LPIindicatorsBEGAY.csv')
ignacio<-read.csv('F:/LPI/Reports/LPIindicatorsIGNACIOLEANTO.csv')
mido<-read.csv('F:/LPI/Reports/LPIindicatorsMIDO.csv')
#Combined back into one LPI file
lpi3<-rbind(begay, ignacio, mido)
write.csv(lpi3,file="F:/LPI/Output/AprilLPIofAll3Soils.csv")
lpi3$Any.Hit.N[is.na(lpi3$Any.Hit.N)] <- lpi3$X1st.Hit.N[is.na(lpi3$Any.Hit.N)]; lpi3
#Put into plot by species matrix
lpiApril<-xtabs(Any.Hit.N~Plot+Indicator, lpi3)
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
lpiApril<-read.csv('F:/LPI/Output/AprilLPIplotXspp.csv',row.names=1)
# Combine DP and live of spp,
a <-select(lpiApril,contains(".DP"))
ls(a)
lpiApril$ARTR2=lpiApril$ARTR2+lpiApril$ARTR2.DP
lpiApril$ATCA2=lpiApril$ATCA2+lpiApril$ATCA2.DP
lpiApril$CHVI8=lpiApril$CHVI8+lpiApril$CHVI8.DP
lpiApril$HECO26=lpiApril$HECO26+lpiApril$HECO26.DP
lpiApril$KRLA2=lpiApril$KRLA2+lpiApril$KRLA2.DP
lpiApril$MAFR3=lpiApril$MAFR3+lpiApril$MAFR3.DP
lpiApril$OPPO=lpiApril$OPPO+lpiApril$OPPO.DP
lpiApril$SHRO=lpiApril$SHRO+lpiApril$SHRO.DP
lpiApril <- subset(lpiApril, select=-c(ARTR2.DP,ATCA2.DP,CHVI8.DP,HECO26.DP,KRLA2.DP,MAFR3.DP,OPPO.DP,SHRO.DP))
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
# Calculate density per m2
den<-lpiApril
den <- den/150 # (5 plots)*(30 meters)=150
den <- subset(den, select=-c(Bare.Soil,Total.Foliar,Total.Litter))
#add all hits on a plot basis, then divide each cell by the sum of a row
# to get how many times a spp was hit relative to how many in plot.
lpiApril <- subset(lpiApril, select=-c(Bare.Soil,Total.Foliar,Total.Litter))
relcoverApril<-lpiApril/rowSums(lpiApril)
write.csv(relcoverApril,file="F:/LPI/Output/AprilLPIRelativeCover.csv")
relcoverApril[100,] <- colSums(relcoverApril != 0)
relcoverApril[101,] <- colSums(relcoverApril[c(1:99),])
sum <- (relcoverApril[c(100:101),])
relcoverApril <- (relcoverApril[-c(100:101),])
View(relcoverApril)
AprilCommonRel <- relcoverApril[(sum[1,] > 5) | (sum[2,] > .05), ]
my.data.frame <- relcoverApril[(relcoverApril[100,] < 5) & (relcoverApril[101,] < .05), ]
my.data.frame <- relcoverApril[(sum[1,] > 5) & (sum[2,] > .05), ]
attempt <- subset(relcoverApril, select=c(relcoverApril[(sum[1,] > 5) | (sum[2,] > .05), ]))
attempt <- subset(relcoverApril, select=(relcoverApril[(sum[1,] > 5) | (sum[2,] > .05), ]))
attempt <- subset(relcoverApril, select=relcoverApril[(sum[1,] > 5) | (sum[2,] > .05), ])
?names
sub.data4<-relcoverApril[ c(1:99),(sum[1,] > 5) & (sum[2,] > .05))]
sub.data4<-relcoverApril[ c(1:99),(sum[1,] > 5) & (sum[2,] > .05)]
View(sub.data4)
AprilCommonRel <- relcoverApril[,(sum[1,] > 5) | (sum[2,] > .05) ]
my.data.frame <- relcoverApril[,(sum[1,] > 5) & (sum[2,] > .05) ]
sub.data4<-relcoverApril[ c(1:99),(sum[1,] > 5) & (sum[2,] > .05)]
my.data.frame <- relcoverApril[,(sum[1,] < 5) & (sum[2,] < .05) ]
library(plyr)
library(dplyr)
# LPI file too big for DIMA, broke it up into soil types to download
# Use the line totals tab from .xlsx file
begay<-read.csv('F:/LPI/Reports/LPIindicatorsBEGAY.csv')
ignacio<-read.csv('F:/LPI/Reports/LPIindicatorsIGNACIOLEANTO.csv')
mido<-read.csv('F:/LPI/Reports/LPIindicatorsMIDO.csv')
#Combined back into one LPI file
lpi3<-rbind(begay, ignacio, mido)
write.csv(lpi3,file="F:/LPI/Output/AprilLPIofAll3Soils.csv")
lpi3$Any.Hit.N[is.na(lpi3$Any.Hit.N)] <- lpi3$X1st.Hit.N[is.na(lpi3$Any.Hit.N)]; lpi3
#Put into plot by species matrix
lpiApril<-xtabs(Any.Hit.N~Plot+Indicator, lpi3)
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
lpiApril<-read.csv('F:/LPI/Output/AprilLPIplotXspp.csv',row.names=1)
# Combine DP and live of spp,
a <-select(lpiApril,contains(".DP"))
ls(a)
lpiApril$ARTR2=lpiApril$ARTR2+lpiApril$ARTR2.DP
lpiApril$ATCA2=lpiApril$ATCA2+lpiApril$ATCA2.DP
lpiApril$CHVI8=lpiApril$CHVI8+lpiApril$CHVI8.DP
lpiApril$HECO26=lpiApril$HECO26+lpiApril$HECO26.DP
lpiApril$KRLA2=lpiApril$KRLA2+lpiApril$KRLA2.DP
lpiApril$MAFR3=lpiApril$MAFR3+lpiApril$MAFR3.DP
lpiApril$OPPO=lpiApril$OPPO+lpiApril$OPPO.DP
lpiApril$SHRO=lpiApril$SHRO+lpiApril$SHRO.DP
lpiApril <- subset(lpiApril, select=-c(ARTR2.DP,ATCA2.DP,CHVI8.DP,HECO26.DP,KRLA2.DP,MAFR3.DP,OPPO.DP,SHRO.DP))
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
# Calculate density per m2
den<-lpiApril
den <- den/150 # (5 plots)*(30 meters)=150
den <- subset(den, select=-c(Bare.Soil,Total.Foliar,Total.Litter))
#add all hits on a plot basis, then divide each cell by the sum of a row
# to get how many times a spp was hit relative to how many in plot.
lpiApril <- subset(lpiApril, select=-c(Bare.Soil,Total.Foliar,Total.Litter))
relcoverApril<-lpiApril/rowSums(lpiApril)
write.csv(relcoverApril,file="F:/LPI/Output/AprilLPIRelativeCover.csv")
relcoverApril[100,] <- colSums(relcoverApril != 0)
relcoverApril[101,] <- colSums(relcoverApril[c(1:99),])
sum <- (relcoverApril[c(100:101),])
relcoverApril <- (relcoverApril[-c(100:101),])
Common <- relcoverApril[,(sum[1,] > 5) | (sum[2,] > .05) ]
Uncommon <- relcoverApril[,(sum[1,] < 5) & (sum[2,] < .05) ]
View(Common)
View(Uncommon)
library(plyr)
library(dplyr)
# LPI file too big for DIMA, broke it up into soil types to download
# Use the line totals tab from .xlsx file
begay<-read.csv('F:/LPI/Reports/LPIindicatorsBEGAY.csv')
ignacio<-read.csv('F:/LPI/Reports/LPIindicatorsIGNACIOLEANTO.csv')
mido<-read.csv('F:/LPI/Reports/LPIindicatorsMIDO.csv')
#Combined back into one LPI file
lpi3<-rbind(begay, ignacio, mido)
write.csv(lpi3,file="F:/LPI/Output/AprilLPIofAll3Soils.csv")
lpi3$Any.Hit.N[is.na(lpi3$Any.Hit.N)] <- lpi3$X1st.Hit.N[is.na(lpi3$Any.Hit.N)]; lpi3
#Put into plot by species matrix
lpiApril<-xtabs(Any.Hit.N~Plot+Indicator, lpi3)
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
lpiApril<-read.csv('F:/LPI/Output/AprilLPIplotXspp.csv',row.names=1)
# Combine DP and live of spp,
a <-select(lpiApril,contains(".DP"))
ls(a)
lpiApril$ARTR2=lpiApril$ARTR2+lpiApril$ARTR2.DP
lpiApril$ATCA2=lpiApril$ATCA2+lpiApril$ATCA2.DP
lpiApril$CHVI8=lpiApril$CHVI8+lpiApril$CHVI8.DP
lpiApril$HECO26=lpiApril$HECO26+lpiApril$HECO26.DP
lpiApril$KRLA2=lpiApril$KRLA2+lpiApril$KRLA2.DP
lpiApril$MAFR3=lpiApril$MAFR3+lpiApril$MAFR3.DP
lpiApril$OPPO=lpiApril$OPPO+lpiApril$OPPO.DP
lpiApril$SHRO=lpiApril$SHRO+lpiApril$SHRO.DP
lpiApril <- subset(lpiApril, select=-c(ARTR2.DP,ATCA2.DP,CHVI8.DP,HECO26.DP,KRLA2.DP,MAFR3.DP,OPPO.DP,SHRO.DP))
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
# Calculate density per m2
den<-lpiApril
den <- den/150 # (5 plots)*(30 meters)=150
den <- subset(den, select=-c(Bare.Soil,Total.Foliar,Total.Litter))
#add all hits on a plot basis, then divide each cell by the sum of a row
# to get how many times a spp was hit relative to how many in plot.
lpiApril <- subset(lpiApril, select=-c(Bare.Soil,Total.Foliar,Total.Litter))
relcoverApril<-lpiApril/rowSums(lpiApril)
write.csv(relcoverApril,file="F:/LPI/Output/AprilLPIRelativeCover.csv")
relcoverApril[100,] <- colSums(relcoverApril != 0)
relcoverApril[101,] <- colSums(relcoverApril[c(1:99),])
sum <- (relcoverApril[c(100:101),])
relcoverApril <- (relcoverApril[-c(100:101),])
Common <- relcoverApril[,(sum[1,] > 5) | (sum[2,] > .05) ]
View(Common)
ls(Common)
ls(Uncommon)
Uncommon <- relcoverApril[,(sum[1,] < 5) & (sum[2,] < .05) ]
ls(Uncommon)
39+24
View(relcoverApril)
View(Common)
View(Uncommon)
View(sum)
Common <- relcoverApril[,(sum[1,] >= 5) | (sum[2,] > .05) ]
1/300*100
(1/300)*100
2/300*100
1/300
2/300
lpiApril[100,] <- colSums(lpiApril != 0)
lpiApril[101,] <- colSums(lpiApril[c(1:99),])
View(lpiApril)
sum <- (lpiApril[c(100:101),])
lpiApril <- (lpiApril[-c(100:101),])
View(sum)
lpiApril/300
cover <- lpiApril/300
View(cover)
cover <- (lpiApril/300)*100
View(cover)
pctcover <- (lpiApril/300)*100
library(plyr)
library(dplyr)
# LPI file too big for DIMA, broke it up into soil types to download
# Use the line totals tab from .xlsx file
begay<-read.csv('F:/LPI/Reports/LPIindicatorsBEGAY.csv')
ignacio<-read.csv('F:/LPI/Reports/LPIindicatorsIGNACIOLEANTO.csv')
mido<-read.csv('F:/LPI/Reports/LPIindicatorsMIDO.csv')
#Combined back into one LPI file
lpi3<-rbind(begay, ignacio, mido)
write.csv(lpi3,file="F:/LPI/Output/AprilLPIofAll3Soils.csv")
lpi3$Any.Hit.N[is.na(lpi3$Any.Hit.N)] <- lpi3$X1st.Hit.N[is.na(lpi3$Any.Hit.N)]; lpi3
#Put into plot by species matrix
lpiApril<-xtabs(Any.Hit.N~Plot+Indicator, lpi3)
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
lpiApril<-read.csv('F:/LPI/Output/AprilLPIplotXspp.csv',row.names=1)
# Combine DP and live of spp,
a <-select(lpiApril,contains(".DP"))
ls(a)
lpiApril$ARTR2=lpiApril$ARTR2+lpiApril$ARTR2.DP
lpiApril$ATCA2=lpiApril$ATCA2+lpiApril$ATCA2.DP
lpiApril$CHVI8=lpiApril$CHVI8+lpiApril$CHVI8.DP
lpiApril$HECO26=lpiApril$HECO26+lpiApril$HECO26.DP
lpiApril$KRLA2=lpiApril$KRLA2+lpiApril$KRLA2.DP
lpiApril$MAFR3=lpiApril$MAFR3+lpiApril$MAFR3.DP
lpiApril$OPPO=lpiApril$OPPO+lpiApril$OPPO.DP
lpiApril$SHRO=lpiApril$SHRO+lpiApril$SHRO.DP
lpiApril <- subset(lpiApril, select=-c(ARTR2.DP,ATCA2.DP,CHVI8.DP,HECO26.DP,KRLA2.DP,MAFR3.DP,OPPO.DP,SHRO.DP))
View(lpiApril)
pctcover <- (lpiApril/300)*100
pctcover[100,] <- colSums(pctcover != 0)
pctcover[101,] <- colSums(pctcover[c(1:99),])
View(pctcover)
sum <- (pctcover[c(100:101),])
pctcover <- (pctcover[-c(100:101),])
View(sum)
Common <- pctcover[,(sum[1,] >= 5) | (sum[2,] > 5) ]
Uncommon <- pctcover[,(sum[1,] < 5) & (sum[2,] < 5) ]
View(Common)
View(Uncommon)
View(Common)
library(plyr)
library(dplyr)
# LPI file too big for DIMA, broke it up into soil types to download
# Use the line totals tab from .xlsx file
begay<-read.csv('F:/LPI/Reports/LPIindicatorsBEGAY.csv')
ignacio<-read.csv('F:/LPI/Reports/LPIindicatorsIGNACIOLEANTO.csv')
mido<-read.csv('F:/LPI/Reports/LPIindicatorsMIDO.csv')
#Combined back into one LPI file
lpi3<-rbind(begay, ignacio, mido)
write.csv(lpi3,file="F:/LPI/Output/AprilLPIofAll3Soils.csv")
lpi3$Any.Hit.N[is.na(lpi3$Any.Hit.N)] <- lpi3$X1st.Hit.N[is.na(lpi3$Any.Hit.N)]; lpi3
#Put into plot by species matrix
lpiApril<-xtabs(Any.Hit.N~Plot+Indicator, lpi3)
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
lpiApril<-read.csv('F:/LPI/Output/AprilLPIplotXspp.csv',row.names=1)
# Combine DP and live of spp,
a <-select(lpiApril,contains(".DP"))
ls(a)
lpiApril$ARTR2=lpiApril$ARTR2+lpiApril$ARTR2.DP
lpiApril$ATCA2=lpiApril$ATCA2+lpiApril$ATCA2.DP
lpiApril$CHVI8=lpiApril$CHVI8+lpiApril$CHVI8.DP
lpiApril$HECO26=lpiApril$HECO26+lpiApril$HECO26.DP
lpiApril$KRLA2=lpiApril$KRLA2+lpiApril$KRLA2.DP
lpiApril$MAFR3=lpiApril$MAFR3+lpiApril$MAFR3.DP
lpiApril$OPPO=lpiApril$OPPO+lpiApril$OPPO.DP
lpiApril$SHRO=lpiApril$SHRO+lpiApril$SHRO.DP
lpiApril <- subset(lpiApril, select=-c(ARTR2.DP,ATCA2.DP,CHVI8.DP,HECO26.DP,KRLA2.DP,MAFR3.DP,OPPO.DP,SHRO.DP))
pctcover <- (lpiApril/300)*100
pctcover[100,] <- colSums(pctcover != 0)
pctcover[101,] <- colSums(pctcover[c(1:99),])
sum <- (pctcover[c(100:101),])
pctcover <- (pctcover[-c(100:101),])
Common <- pctcover[,(sum[1,] >= 5) | (sum[2,] > 5) ]
Uncommon <- pctcover[,(sum[1,] < 5) & (sum[2,] < 5) ]
View(Common)
View(sum)
View(Common)
library(plyr)
library(dplyr)
# LPI file too big for DIMA, broke it up into soil types to download
# Use the line totals tab from .xlsx file
begay<-read.csv('F:/LPI/Reports/LPIindicatorsBEGAY.csv')
ignacio<-read.csv('F:/LPI/Reports/LPIindicatorsIGNACIOLEANTO.csv')
mido<-read.csv('F:/LPI/Reports/LPIindicatorsMIDO.csv')
#Combined back into one LPI file
lpi3<-rbind(begay, ignacio, mido)
write.csv(lpi3,file="F:/LPI/Output/AprilLPIofAll3Soils.csv")
lpi3$Any.Hit.N[is.na(lpi3$Any.Hit.N)] <- lpi3$X1st.Hit.N[is.na(lpi3$Any.Hit.N)]; lpi3
#Put into plot by species matrix
lpiApril<-xtabs(Any.Hit.N~Plot+Indicator, lpi3)
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
lpiApril<-read.csv('F:/LPI/Output/AprilLPIplotXspp.csv',row.names=1)
# Combine DP and live of spp,
a <-select(lpiApril,contains(".DP"))
ls(a)
lpiApril$ARTR2=lpiApril$ARTR2+lpiApril$ARTR2.DP
lpiApril$ATCA2=lpiApril$ATCA2+lpiApril$ATCA2.DP
lpiApril$CHVI8=lpiApril$CHVI8+lpiApril$CHVI8.DP
lpiApril$HECO26=lpiApril$HECO26+lpiApril$HECO26.DP
lpiApril$KRLA2=lpiApril$KRLA2+lpiApril$KRLA2.DP
lpiApril$MAFR3=lpiApril$MAFR3+lpiApril$MAFR3.DP
lpiApril$OPPO=lpiApril$OPPO+lpiApril$OPPO.DP
lpiApril$SHRO=lpiApril$SHRO+lpiApril$SHRO.DP
lpiApril <- subset(lpiApril, select=-c(ARTR2.DP,ATCA2.DP,CHVI8.DP,HECO26.DP,KRLA2.DP,MAFR3.DP,OPPO.DP,SHRO.DP))
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
# Calculate % cover: (spp#hits/total possible hits)*100
pctcover <- (lpiApril/300)*100
pctcover[100,] <- colSums(pctcover != 0)
pctcover[101,] <- colSums(pctcover[c(1:99),])
sum <- (pctcover[c(100:101),])
pctcover <- (pctcover[-c(100:101),])
# Find the Common and Uncommon spp: Common occur in at least 5% of plots or have at least 5% coverage
Common <- pctcover[,(sum[1,] >= 5) | (sum[2,] > 5) ]
Uncommon <- pctcover[,(sum[1,] < 5) & (sum[2,] < 5) ]
# Remove uncommon spp. in by comparing to Common
lpiApril <- cbind(lpiApril[, which(colnames(lpiApril)%in% colnames(Common))])
write.csv(den,file="F:/LPI/Output/AprilLPICommon.csv", row.names=TRUE)
View(lpiApril)
View(Common)
ls(lpiApril)
ls(Common)
write.csv(lpiApril,file="F:/LPI/Output/AprilLPICommon.csv", row.names=TRUE)
# Calculate density per m2
den<-lpiApril
den <- den/150 # (5 plots)*(30 meters)=150
View(den)
den <- subset(den, select=-c(Bare.Soil,Total.Foliar))
lpiApril <- subset(lpiApril, select=-c(Bare.Soil,Total.Foliar))
relcoverApril<-lpiApril/rowSums(lpiApril)
write.csv(relcoverApril,file="F:/LPI/Output/AprilLPIRelativeCover.csv")
library(plyr)
library(dplyr)
# LPI file too big for DIMA, broke it up into soil types to download
# Use the line totals tab from .xlsx file
begay<-read.csv('F:/LPI/Reports/LPIindicatorsBEGAY.csv')
ignacio<-read.csv('F:/LPI/Reports/LPIindicatorsIGNACIOLEANTO.csv')
mido<-read.csv('F:/LPI/Reports/LPIindicatorsMIDO.csv')
#Combined back into one LPI file
lpi3<-rbind(begay, ignacio, mido)
write.csv(lpi3,file="F:/LPI/Output/AprilLPIofAll3Soils.csv")
lpi3$Any.Hit.N[is.na(lpi3$Any.Hit.N)] <- lpi3$X1st.Hit.N[is.na(lpi3$Any.Hit.N)]; lpi3
#Put into plot by species matrix
lpiApril<-xtabs(Any.Hit.N~Plot+Indicator, lpi3)
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
lpiApril<-read.csv('F:/LPI/Output/AprilLPIplotXspp.csv',row.names=1)
# Combine DP and live of spp,
a <-select(lpiApril,contains(".DP"))
ls(a)
lpiApril$ARTR2=lpiApril$ARTR2+lpiApril$ARTR2.DP
lpiApril$ATCA2=lpiApril$ATCA2+lpiApril$ATCA2.DP
lpiApril$CHVI8=lpiApril$CHVI8+lpiApril$CHVI8.DP
lpiApril$HECO26=lpiApril$HECO26+lpiApril$HECO26.DP
lpiApril$KRLA2=lpiApril$KRLA2+lpiApril$KRLA2.DP
lpiApril$MAFR3=lpiApril$MAFR3+lpiApril$MAFR3.DP
lpiApril$OPPO=lpiApril$OPPO+lpiApril$OPPO.DP
lpiApril$SHRO=lpiApril$SHRO+lpiApril$SHRO.DP
lpiApril <- subset(lpiApril, select=-c(ARTR2.DP,ATCA2.DP,CHVI8.DP,HECO26.DP,KRLA2.DP,MAFR3.DP,OPPO.DP,SHRO.DP))
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
# Calculate % cover: (spp#hits/total possible hits)*100
pctcover <- (lpiApril/300)*100
pctcover[100,] <- colSums(pctcover != 0)
pctcover[101,] <- colSums(pctcover[c(1:99),])
sum <- (pctcover[c(100:101),])
pctcover <- (pctcover[-c(100:101),])
# Find the Common and Uncommon spp: Common occur in at least 5% of plots or have at least 5% coverage
Common <- pctcover[,(sum[1,] >= 5) | (sum[2,] > 5) ]
Uncommon <- pctcover[,(sum[1,] < 5) & (sum[2,] < 5) ]
# Remove uncommon spp. in by comparing to Common
lpiApril <- cbind(lpiApril[, which(colnames(lpiApril)%in% colnames(Common))])
write.csv(lpiApril,file="F:/LPI/Output/AprilLPICommon.csv", row.names=TRUE)
# Calculate density per m2
den<-lpiApril
den <- den/150 # (5 plots)*(30 meters)=150m
den <- subset(den, select=-c(Bare.Soil,Total.Foliar))
# Calculate Relative Cover:
# add all hits on a plot basis, then divide each cell by the sum of a row
# to get how many times a spp was hit relative to how many in plot.
lpiApril <- subset(lpiApril, select=-c(Bare.Soil,Total.Foliar))
relcoverApril<-lpiApril/rowSums(lpiApril)
write.csv(relcoverApril,file="F:/LPI/Output/AprilLPIRelativeCover.csv")
library(plyr)
library(dplyr)
# LPI file too big for DIMA, broke it up into soil types to download
# Use the line totals tab from .xlsx file
begay<-read.csv('F:/LPI/Reports/LPIindicatorsBEGAY.csv')
ignacio<-read.csv('F:/LPI/Reports/LPIindicatorsIGNACIOLEANTO.csv')
mido<-read.csv('F:/LPI/Reports/LPIindicatorsMIDO.csv')
#Combined back into one LPI file
lpi3<-rbind(begay, ignacio, mido)
write.csv(lpi3,file="F:/LPI/Output/AprilLPIofAll3Soils.csv")
lpi3$Any.Hit.N[is.na(lpi3$Any.Hit.N)] <- lpi3$X1st.Hit.N[is.na(lpi3$Any.Hit.N)]; lpi3
#Put into plot by species matrix
lpiApril<-xtabs(Any.Hit.N~Plot+Indicator, lpi3)
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
lpiApril<-read.csv('F:/LPI/Output/AprilLPIplotXspp.csv',row.names=1)
# Combine DP and live of spp,
a <-select(lpiApril,contains(".DP"))
ls(a)
lpiApril$ARTR2=lpiApril$ARTR2+lpiApril$ARTR2.DP
lpiApril$ATCA2=lpiApril$ATCA2+lpiApril$ATCA2.DP
lpiApril$CHVI8=lpiApril$CHVI8+lpiApril$CHVI8.DP
lpiApril$HECO26=lpiApril$HECO26+lpiApril$HECO26.DP
lpiApril$KRLA2=lpiApril$KRLA2+lpiApril$KRLA2.DP
lpiApril$MAFR3=lpiApril$MAFR3+lpiApril$MAFR3.DP
lpiApril$OPPO=lpiApril$OPPO+lpiApril$OPPO.DP
lpiApril$SHRO=lpiApril$SHRO+lpiApril$SHRO.DP
lpiApril <- subset(lpiApril, select=-c(ARTR2.DP,ATCA2.DP,CHVI8.DP,HECO26.DP,KRLA2.DP,MAFR3.DP,OPPO.DP,SHRO.DP))
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
# Calculate % cover: (spp#hits/total possible hits)*100
pctcover <- (lpiApril/300)*100
pctcover[100,] <- colSums(pctcover != 0)
pctcover[101,] <- colSums(pctcover[c(1:99),])
sum <- (pctcover[c(100:101),])
pctcover <- (pctcover[-c(100:101),])
# Find the Common and Uncommon spp: Common occur in at least 5% of plots or have at least 5% coverage
Common <- pctcover[,(sum[1,] >= 5) | (sum[2,] > 5) ]
Uncommon <- pctcover[,(sum[1,] < 5) & (sum[2,] < 5) ]
# Remove uncommon spp. in by comparing to Common
lpiApril <- cbind(lpiApril[, which(colnames(lpiApril)%in% colnames(Common))])
write.csv(lpiApril,file="F:/LPI/Output/AprilLPICommon.csv", row.names=TRUE)
# Calculate density per m2
den<-lpiApril
den <- den/150 # (5 plots)*(30 meters)=150m
den <- subset(den, select=-c(Bare.Soil,Total.Foliar))
write.csv(den,file="F:/LPI/Output/AprilLPIDensityM2.csv", row.names=TRUE)
# Calculate Relative Cover:
# add all hits on a plot basis, then divide each cell by the sum of a row
# to get how many times a spp was hit relative to how many in plot.
lpiApril <- subset(lpiApril, select=-c(Bare.Soil,Total.Foliar))
relcoverApril<-lpiApril/rowSums(lpiApril)
write.csv(relcoverApril,file="F:/LPI/Output/AprilLPIRelativeCover.csv")
View(pctcover)
library(plyr)
library(dplyr)
# LPI file too big for DIMA, broke it up into soil types to download
# Use the line totals tab from .xlsx file
begay<-read.csv('F:/LPI/Reports/LPIindicatorsBEGAY.csv')
ignacio<-read.csv('F:/LPI/Reports/LPIindicatorsIGNACIOLEANTO.csv')
mido<-read.csv('F:/LPI/Reports/LPIindicatorsMIDO.csv')
#Combined back into one LPI file
lpi3<-rbind(begay, ignacio, mido)
write.csv(lpi3,file="F:/LPI/Output/AprilLPIofAll3Soils.csv")
lpi3$Any.Hit.N[is.na(lpi3$Any.Hit.N)] <- lpi3$X1st.Hit.N[is.na(lpi3$Any.Hit.N)]; lpi3
#Put into plot by species matrix
lpiApril<-xtabs(Any.Hit.N~Plot+Indicator, lpi3)
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
lpiApril<-read.csv('F:/LPI/Output/AprilLPIplotXspp.csv',row.names=1)
# Combine DP and live of spp,
a <-select(lpiApril,contains(".DP"))
ls(a)
lpiApril$ARTR2=lpiApril$ARTR2+lpiApril$ARTR2.DP
lpiApril$ATCA2=lpiApril$ATCA2+lpiApril$ATCA2.DP
lpiApril$CHVI8=lpiApril$CHVI8+lpiApril$CHVI8.DP
lpiApril$HECO26=lpiApril$HECO26+lpiApril$HECO26.DP
lpiApril$KRLA2=lpiApril$KRLA2+lpiApril$KRLA2.DP
lpiApril$MAFR3=lpiApril$MAFR3+lpiApril$MAFR3.DP
lpiApril$OPPO=lpiApril$OPPO+lpiApril$OPPO.DP
lpiApril$SHRO=lpiApril$SHRO+lpiApril$SHRO.DP
lpiApril <- subset(lpiApril, select=-c(ARTR2.DP,ATCA2.DP,CHVI8.DP,HECO26.DP,KRLA2.DP,MAFR3.DP,OPPO.DP,SHRO.DP))
write.csv(lpiApril,file="F:/LPI/Output/AprilLPIplotXspp.csv",row.names=TRUE)
# Calculate % cover: (spp#hits/total possible hits)*100
pctcover <- (lpiApril/300)*100
pctcover[100,] <- colSums(pctcover != 0)
pctcover[101,] <- colSums(pctcover[c(1:99),])
sum <- (pctcover[c(100:101),])
pctcover <- (pctcover[-c(100:101),])
# Find the Common and Uncommon spp: Common occur in at least 5% of plots or have at least 5% coverage
Common <- pctcover[,(sum[1,] >= 5) | (sum[2,] > 5) ]
Uncommon <- pctcover[,(sum[1,] < 5) & (sum[2,] < 5) ]
# Remove uncommon spp. in by comparing to Common
lpiApril <- cbind(lpiApril[, which(colnames(lpiApril)%in% colnames(Common))])
# Calculate density per m2
den<-lpiApril
den <- den/150 # (5 plots)*(30 meters)=150m
den <- subset(den, select=-c(Bare.Soil,Total.Foliar))
write.csv(den,file="F:/LPI/Output/AprilLPIDensityM2.csv", row.names=TRUE)
# Calculate Relative Cover:
# add all hits on a plot basis, then divide each cell by the sum of a row
# to get how many times a spp was hit relative to how many in plot.
lpiApril <- subset(lpiApril, select=-c(Bare.Soil,Total.Foliar))
relcoverApril<-lpiApril/rowSums(lpiApril)
write.csv(relcoverApril,file="F:/LPI/Output/AprilLPIRelativeCover.csv")
write.csv(lpiApril,file="F:/LPI/Output/AprilLPICommon.csv", row.names=TRUE)
usgs<-read.csv('F:/LPI/Reports/LPIindicatorsUSGS.csv')
# Have to convert usgs plot names into factor not numeric
# otherwise they get replaced with NA
usgs$Plot <- factor(usgs$Plot)
is.factor(usgs$Plot)
lpi<-xtabs(Any.Hit.N~Plot+Indicator, usgs)
write.csv(lpi,file="F:/LPI/Output/USGSLPIplotXspp.csv")
lpi<-read.csv('F:/LPI/Output/USGSLPIplotXspp.csv',row.names=1)
View(lpi)
